/*==============================================================================
  atkinson-litera.scss (Tufte-like body + background carta + math più grande)
  - Base: Bootswatch "litera"
  - Corpo: ETBook (serif) con metrica tipo Tufte
  - Titoli: ETBook (serif)
  - Monospace: Fira Code calibrato
  - Background: #fffff8 (Tufte)
  - Matematica: +3% inline, +6% display
==============================================================================*/

/*-- scss:defaults --*/

/* Base Bootswatch */
$theme: "litera";

/* Web fonts (monospace) */
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&display=swap');

/* ETBook locale */
@font-face {
  font-family: "ETBook";
  src: url("./style/etbook/ETBook-Regular.woff") format("woff");
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}
@font-face {
  font-family: "ETBook";
  src: url("./style/etbook/ETBook-Italic.woff") format("woff");
  font-style: italic;
  font-weight: 400;
  font-display: swap;
}
@font-face {
  font-family: "ETBook";
  src: url("./style/etbook/ETBook-Bold.woff") format("woff");
  font-style: normal;
  font-weight: 700;
  font-display: swap;
}

/* Tipografia base */
$font-size-root: 20.5px;

/* Stack serif e sans */
$font-family-serif: "ETBook", "EB Garamond", Georgia, "Times New Roman", serif;
$font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                         "Helvetica Neue", Arial, "Noto Sans", sans-serif;

/* Corpo e titoli entrambi in ETBook */
$font-family-base: $font-family-serif;
$headings-font-family: $font-family-serif;

/* Monospace */
$font-family-monospace: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco,
                        Consolas, "Liberation Mono", "Courier New", monospace;


/*-- scss:rules --*/

/* Bootstrap runtime CSS vars */
:root {
  --bs-font-serif: #{$font-family-serif};
  --bs-font-sans-serif: #{$font-family-sans-serif};
  --bs-body-font-family: var(--bs-font-serif);
  --bs-body-bg: #fffff8;
}

/* Corpo */
body {
  font-family: var(--bs-body-font-family);
  background-color: var(--bs-body-bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.5;
  text-rendering: optimizeLegibility;
  font-variant-ligatures: common-ligatures;
  font-variant-numeric: oldstyle-nums proportional-nums;
  font-kerning: normal;
}

/* Titoli */
h1, h2, h3, h4, h5, h6 {
  font-family: #{$headings-font-family};
  font-weight: 600;
  line-height: 1.25;
  letter-spacing: 0.2px;
  margin-top: 1.6em;
  margin-bottom: 0.55em;
  text-rendering: optimizeLegibility;
  font-variant-ligatures: common-ligatures discretionary-ligatures;
  font-variant-numeric: oldstyle-nums proportional-nums;
}

/* Scala titoli */
h1 { font-size: clamp(2.0rem, 3.0vw, 2.55rem); }
h2 { font-size: clamp(1.60rem, 2.2vw, 2.00rem); }
h3 { font-size: clamp(1.34rem, 1.6vw, 1.58rem); }
h4 { font-size: 1.25rem; }
h5 { font-size: 1.1rem; }
h6 { font-size: 1rem; }

/* Link */
a {
  text-decoration: underline;
  transition: color 0.2s ease-in-out, text-decoration-color 0.2s ease-in-out;
}

/* Monospace calibrato */
code, kbd, samp {
  font-family: $font-family-monospace;
  font-size: 0.88em;
}
pre {
  line-height: 1.48;
}

/* === Code blocks: stile Stan Docs (#f8f8f8, no left border) === */

:root {
  --stan-bg: #f8f8f8;
  --stan-secondary: var(--bs-primary);
  --stan-dark: var(--bs-body-color);
  --stan-highlight: #fff3cd;
}

/* Inline code */
:not(pre) > code,
:not(pre) > kbd,
:not(pre) > samp {
  white-space: inherit;
  color: var(--stan-dark);
  background-color: var(--stan-bg);
  border: 1px solid #e0e0e0;
  border-radius: 3px;
  padding: 0.05em 0.22em;
  font-size: 0.82em !important;
  line-height: 1;
}

/* Code blocks */
div.sourceCode > pre,
pre.sourceCode,
.code-with-copy pre,
.code-with-copy .sourceCode pre,
pre[class*="sourceCode"],
pre:not(.sourceCode) {
  color: var(--stan-dark) !important;
  background-color: var(--stan-bg) !important;
  border: 1px solid #e0e0e0 !important;
  padding: 1rem;
  overflow-x: auto;
  line-height: 1.48;
}

/* Riduzione font SOLO nei blocchi */
pre code {
  background: transparent !important;
  color: inherit !important;
  border: none !important;
  padding: 0;
  white-space: inherit;
  font-size: 0.88em; /* ridotto */
}

/* Tabelle */
table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1.25rem;
  font-size: 0.95rem;
}
th, td {
  border: 1px solid var(--bs-border-color);
  padding: 0.6em 0.8em;
  text-align: left;
}
th {
  background-color: var(--bs-table-bg);
  font-weight: 600;
}

/* Matematica più grande */
.math.inline   { font-size: 1.03em; line-height: 1.5; }
.math.display  { font-size: 1.06em; line-height: 1.5; }
.katex         { font-size: 1.04em; }
mjx-container  { font-size: 104%; line-height: 1.5; }

/* Sottotitolo */
.subtitle > a {
  color: var(--bs-secondary-color);
  font-weight: 700;
}

/* Titoli in corsivo (capitoli, sezioni, sottosezioni) */
h1, h2, h3, h4, h5, h6 { 
  font-style: italic;
}

/* Non corsivare il codice dentro i titoli */
h1 code, h2 code, h3 code, h4 code, h5 code, h6 code {
  font-style: normal;
}

/* Nasconde la numerazione dalle sezioni e sottosezioni, mantiene quella dei capitoli */
h2 .header-section-number,
h3 .header-section-number,
h4 .header-section-number,
h5 .header-section-number,
h6 .header-section-number {
  display: none;
}
